<div class="product-card" data-product-id="<%= product.id %>" data-category="<%= product.category %>">
    <div class="product-image-container">
        <% if (product.images.length > 1) { %>
            <!-- Product with multiple images - show second on hover -->
            <img src="/src/images/shop/candles/<%= product.images[0] %>" 
                 alt="<%= product.name %>" 
                 class="product-image primary-image"
                 loading="lazy">
            <img src="/src/images/shop/candles/<%= product.images[1] %>" 
                 alt="<%= product.name %> - Alternative view" 
                 class="product-image secondary-image"
                 loading="lazy">
        <% } else { %>
            <!-- Product with single image - zoom effect on hover -->
            <img src="/src/images/shop/candles/<%= product.images[0] %>" 
                 alt="<%= product.name %>" 
                 class="product-image single-image"
                 loading="lazy">
        <% } %>
        
        <!-- Product badges -->
        <div class="product-badges">
            <% if (product.featured) { %>
                <span class="badge featured">Featured</span>
            <% } %>
            <% if (product.originalPrice > product.price) { %>
                <span class="badge sale">Sale</span>
            <% } %>
            <% if (product.inStock < 5) { %>
                <span class="badge low-stock">Only <%= product.inStock %> left</span>
            <% } %>
        </div>
        
        <!-- Quick actions -->
        <div class="product-quick-actions">
            <button class="quick-action quick-view" onclick="quickView('<%= product.id %>')" title="Quick View">
                <i class="fas fa-eye"></i>
            </button>
            <button class="quick-action add-to-wishlist" onclick="addToWishlist('<%= product.id %>')" title="Add to Wishlist">
                <i class="far fa-heart"></i>
            </button>
        </div>
    </div>
    
    <div class="product-info">
        <div class="product-category">
            <%= product.category.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase()) %>
        </div>
        
        <h3 class="product-name">
            <a href="/candle-shop/product/<%= product.id %>"><%= product.name %></a>
        </h3>
        
        <p class="product-description">
            <%= product.description.substring(0, 80) %>...
        </p>
        
        <div class="product-price">
            <span class="current-price">₹<%= product.price %></span>
            <% if (product.originalPrice > product.price) { %>
                <span class="original-price">₹<%= product.originalPrice %></span>
                <span class="discount">
                    <%= Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100) %>% OFF
                </span>
            <% } %>
        </div>
        
        <div class="product-actions">
            <div class="quantity-controls">
                <button class="qty-btn minus" onclick="changeQuantity('<%= product.id %>', -1)">
                    <i class="fas fa-minus"></i>
                </button>
                <input type="number" 
                       class="quantity-input" 
                       id="qty-<%= product.id %>" 
                       value="1" 
                       min="1" 
                       max="<%= product.inStock %>"
                       onchange="validateQuantity('<%= product.id %>')">
                <button class="qty-btn plus" onclick="changeQuantity('<%= product.id %>', 1)">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            
            <button class="add-to-cart-btn" 
                    onclick="addToCart('<%= product.id %>')"
                    <% if (product.inStock === 0) { %>disabled<% } %>>
                <% if (product.inStock === 0) { %>
                    <i class="fas fa-times"></i>
                    Out of Stock
                <% } else { %>
                    <i class="fas fa-shopping-cart"></i>
                    Add to Cart
                <% } %>
            </button>
        </div>
        
        <div class="product-tags">
            <% product.tags.forEach(tag => { %>
                <span class="product-tag">#<%= tag %></span>
            <% }) %>
        </div>
        
        <div class="product-stock-info">
            <% if (product.inStock > 10) { %>
                <span class="stock-status in-stock">
                    <i class="fas fa-check-circle"></i> In Stock
                </span>
            <% } else if (product.inStock > 0) { %>
                <span class="stock-status low-stock">
                    <i class="fas fa-exclamation-triangle"></i> Only <%= product.inStock %> left
                </span>
            <% } else { %>
                <span class="stock-status out-of-stock">
                    <i class="fas fa-times-circle"></i> Out of Stock
                </span>
            <% } %>
        </div>
    </div>
</div>